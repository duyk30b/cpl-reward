syntax = "proto3";

package admin_campaign;

service GrpcAdminCampaignService {
  rpc Create(CreateInput) returns (Result);
  rpc Cancel(CancelInput) returns (CancelResult);
  rpc FindOne(FindOneInput) returns (Result);
  rpc Update(UpdateInput) returns (Result);
  rpc List(ListInput) returns (ListResult);
}

message ListResult {
  repeated CampaignWithoutRules items = 1;
  ListMeta meta = 2;
}

message ListMeta {
   int32 totalItems = 1;
   int32 itemCount = 2;
   int32 itemsPerPage = 3;
   int32 totalPages = 4;
   int32 currentPage = 5;
}

message ListCampaign {
  string title = 1;
}

message ListInput {
  int32 page = 1;
  int32 limit = 2;
}

message CancelInput {
  int32 campaignId = 1;
}

message CancelResult {
  int32 affected = 1;
}

message Empty {}

message InitResult {
  int32 id = 1;
}

message FindOneInput {
  int32 id = 1;
}

message UpdateInput {
  int32 id = 1;
  string title = 2;
  string description = 3;
  string detailExplain = 4;
  int32 startDate = 5;
  int32 endDate = 6;
  string notificationLink = 7;
  string campaignImage = 8;
  int32 priority = 9;
  bool isSystem = 10;
  repeated UpdateRewardRule rewardRules = 11;
}

message UpdateRewardRule {
  int32 id = 1;
  string key = 2;
  string currency = 3;
  int32 limitValue = 4;
}

message CreateRewardRule {
  string key = 2;
  string currency = 3;
  int32 limitValue = 4;
}

message CampaignWithoutRules {
  int32 id = 1;
  string title = 2;
  string description = 3;
  string detailExplain = 4;
  int32 startDate = 5;
  int32 endDate = 6;
  string notificationLink = 7;
  string campaignImage = 8;
  int32 priority = 9; // default: 0
  bool isSystem = 10; // default: false
}

message Result {
  int32 id = 1;
  string title = 2;
  string description = 3;
  string detailExplain = 4;
  int32 startDate = 5;
  int32 endDate = 6;
  string notificationLink = 7;
  string campaignImage = 8;
  int32 priority = 9; // default: 0
  bool isSystem = 10; // default: false
  repeated RewardRuleResult rewardRules = 11;
}

message RewardRuleResult {
  int32 createdAt = 1;
  int32 updatedAt = 2;
  int32 id = 3;
  string key = 4;
  string currency = 5;
  int32 limitValue = 6;
  int32 releaseValue = 7;
}

message CreateInput {
  string title = 1;
  string description = 2;
  string detailExplain = 3;
  int32 startDate = 4;
  int32 endDate = 5;
  string notificationLink = 6;
  string campaignImage = 7;
  int32 priority = 8; // default: 0
  bool isSystem = 9; // default: false
  repeated CreateRewardRule rewardRules = 10;
}
